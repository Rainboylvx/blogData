{"data":{},"__content":"<h1 id=\"%E6%9C%89%E5%85%B3io%E7%9A%84%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C\" tabindex=\"-1\">有关io的相关操作</h1>\n<h2 id=\"fdopen\" tabindex=\"-1\">fdopen</h2>\n<p>fdopen,把fd与c stream连接在一起</p>\n<p>coe</p>\n<pre><code class=\"language-cpp\">#include &lt;cstdio&gt;\n\nint main(){\n    FILE * rd = fdopen(0, &quot;r&quot;);\n    int a;\n    fscanf(rd, &quot;%d&quot;,&amp;a);\n    printf(&quot;a = %d \\n&quot;,a);\n    return 0;\n}\n</code></pre>\n<pre><code class=\"language-cpp\">#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cstring&gt;\n\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n\nint main(){\n    \n    std::cout &lt;&lt; &quot;creating sample.dat&quot; &lt;&lt; &quot;\\n&quot;;\n\n    //创建一个 c 语言的 文件流\n    FILE * fd = fopen(&quot;sample.dat&quot;, &quot;w&quot;);\n    if( fd == nullptr ) {\n        std::cout &lt;&lt; &quot;File create failed!&quot; &lt;&lt; &quot;\\n&quot;;\n        return 0;\n    }\n\n    //写入 文件流里\n    fprintf(fd, &quot;sample program&quot;);\n    fclose(fd); //关闭c文件流\n\n    //创建一个buffer\n    char buffer[20] = {0};\n\n    //使用open创建一个文件描述符号\n    int fh = open(&quot;sample.data&quot;, O_RDWR | O_APPEND);\n    if( fh == -1 ){ //创建失败\n        std::cout &lt;&lt; &quot;Uable to open sample.data&quot; &lt;&lt; &quot;\\n&quot;;\n        return 0;\n    }\n\n    //关联 文件描述符号 与 c文件流\n    FILE * fp = fdopen(fh, &quot;r&quot;);\n    if(fp == nullptr) {\n        std::cout &lt;&lt; &quot;fdopen failed&quot; &lt;&lt; &quot;\\n&quot;;\n        return 0;\n    }\n\n    // 读取 c文件流\n    if( 14 != fread(buffer, 1, 14, fp)){\n        std::cout &lt;&lt; &quot;read error&quot; &lt;&lt; &quot;\\n&quot;;\n        fclose(fp);\n        return 1;\n    }\n    std::cout &lt;&lt; &quot;Successly read from the stream :\\n&quot; &lt;&lt; buffer &lt;&lt; &quot;\\n&quot;;\n    fclose(fp);\n    return 0;\n}\n</code></pre>\n<h2 id=\"setvbuf\" tabindex=\"-1\">setvbuf</h2>\n<p>这是一个c的api\n<a href=\"https://en.cppreference.com/w/c/io/setvbuf\">setvbuf - cppreference.com</a></p>\n<p>指明c文件流的buffering mode</p>\n<p>根据下面的写的如果buffer point to Null,就不会改size\n<a href=\"https://stackoverflow.com/questions/62126052/setvbuf-not-changing-buffer-size\">c - setvbuf not changing buffer size? - Stack Overflow</a></p>\n"}