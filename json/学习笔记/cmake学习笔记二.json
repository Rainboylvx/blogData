{"data":{"_id":"By1aYVI_m","title":"cmake学习笔记二","date":"2018-09-12 15:01","update":"2018-09-12 15:01","series":"cmake学习笔记","categories":["学习笔记"],"tags":["linux","cmake"]},"__content":"<h2 id=\"%E7%AE%80%E5%8D%95%E8%AF%AD%E6%B3%95\" tabindex=\"-1\">简单语法</h2>\n<p><strong>1.注释</strong></p>\n<pre><code># 我是注释\n</code></pre>\n<p><strong>.2命令语法</strong></p>\n<pre><code>COMMAND(参数 1 参数 2 ...)\n</code></pre>\n<p><strong>3.字符串列表</strong></p>\n<pre><code>A;B;C # 分号分割或空格分隔的值\n</code></pre>\n<p><strong>4.变量(字符串或字符串列表)</strong></p>\n<pre><code>set(Foo a b c) 设置变量 Foo\ncommand(${Foo}) 等价于 command(a b c)\ncommand(&quot;${Foo}&quot;) 等价于 command(&quot;a b c&quot;)\ncommand(&quot;/${Foo}&quot;) 转义，和 a b c 无关联\n</code></pre>\n<p><strong>5.流控制结构</strong></p>\n<pre><code>IF()...ELSE()/ELSEIF()...ENDIF()\nWHILE()...ENDWHILE()\nFOREACH()...ENDFOREACH()\n</code></pre>\n<h2 id=\"%E9%83%A8%E5%88%86%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4\" tabindex=\"-1\">部分常用命令</h2>\n<p><img src=\"http://ww1.sinaimg.cn/large/618359cbly1fv6ruscy1ej20o80xwwfz.jpg\" alt=\"\"></p>\n<h2 id=\"%E5%B8%B8%E7%94%A8%E5%8F%98%E9%87%8F\" tabindex=\"-1\">常用变量</h2>\n<p>工程路径</p>\n<ul>\n<li>CMAKE_SOURCE_DIR</li>\n<li>PROJECT_SOURCE_DIR</li>\n<li><code>&lt;projectname&gt;_SOURCE_DIR</code></li>\n</ul>\n<p>这三个变量指代的内容是一致的，是工程顶层目录</p>\n<ul>\n<li>CMAKE_BINARY_DIR</li>\n<li>PROJECT_BINARY_DIR</li>\n<li><code>&lt;projectname&gt;_BINARY_DIR</code></li>\n</ul>\n<p>这三个变量指代的内容是一致的，如果是 in source 编译，指得就是工程顶层目录，如果 是 out-of-source 编译，指的是工程编译发生的目录</p>\n<ul>\n<li>CMAKE_CURRENT_SOURCE_DIR</li>\n</ul>\n<p>指的是当前处理的 CMakeLists.txt 所在的路径。</p>\n<ul>\n<li>CMAKE_CURRRENT_BINARY_DIR</li>\n</ul>\n<p>如果是 in-source 编译，它跟 CMAKE_CURRENT_SOURCE_DIR 一致，如果是 out-ofsource 编译，他指的是 target 编译目录。</p>\n<ul>\n<li>CMAKE_CURRENT_LIST_FILE</li>\n</ul>\n<p>输出调用这个变量的 CMakeLists.txt 的完整路径</p>\n<ul>\n<li>CMAKE_CXX_FLAGS_DEBUG</li>\n<li>CMAKE_CXX_FLAGS_RELEASE</li>\n</ul>\n<p>这两个变量是分别用于 debug 和 release 的编译选项。</p>\n<p>CMAKE_BUILD_TYPE</p>\n<p>控制 Debug 和 Release 模式的构建CMakeList.txt 文件</p>\n<ul>\n<li>SET(CMAKE_BUILD_TYPE Debug)</li>\n</ul>\n<p>命令行参数</p>\n<ul>\n<li>cmake DCMAKE_BUILD_TYPE=Release</li>\n</ul>\n<p>编译器参数</p>\n<ul>\n<li>CMAKE_C_FLAGS</li>\n<li>CMAKE_CXX_FLAGS</li>\n</ul>\n<p>也可以通过指令 ADD_DEFINITIONS()添加</p>\n<ul>\n<li>CMAKE_INSTALL_PREFIX</li>\n</ul>\n<p>控制 make install 是文件会安装到什么地方。默认定义是/usr/local 或 %PROGRAMFILES%\nBUILD_SHARED_LIBS\n如果不进行设置，使用 ADD_LIBRARY 且没有指定库类型，默认编译生成的库是静态库。</p>\n"}