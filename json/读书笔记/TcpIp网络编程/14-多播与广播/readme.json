{"data":{},"__content":"<h1 id=\"%E5%A4%9A%E6%92%AD\" tabindex=\"-1\">多播</h1>\n<h2 id=\"%E8%AE%BE%E7%BD%AE%E7%94%9F%E5%AD%98%E6%97%B6%E9%97%B4ttl\" tabindex=\"-1\">设置生存时间TTL</h2>\n<pre><code>#include&lt;sys/socket.h&gt;\n#include&lt;arpa/inet.h&gt;\n\nint sock = socket(PF_INET, SOCK_DGRAM, 0);\n\nint timeLive = 64;\n\nsetsockopt(sock, IPPROTO_IP, IP_MULTICAST_TTL, (void*)&amp;timeLive, sizeof(timeLive));\n</code></pre>\n<blockquote>\n<p>TTL 即Time To Live（生存时间）,决定了数据包传递的距离；TTL用整数表示，数据包每经过一个路由器时TTL就减一，当TTL为0时销毁数据包。</p>\n</blockquote>\n<h2 id=\"%E5%8A%A0%E5%85%A5%E5%A4%9A%E6%92%AD%E7%BB%84\" tabindex=\"-1\">加入多播组</h2>\n<pre><code>#include&lt;sys/socket.h&gt;\n#include&lt;arpa/inet.h&gt;\n\nint sock = socket(PF_INET, SOCK_DGRAM, 0);\n\nstruct ip_mreq joinAddr;\njoinAddr.imr_multiaddr.s_addr = &quot;多播组地址信息&quot;\njoinAddr.imr_interface.s_addr = &quot;本机地址信息&quot;\n\nsetsockopt(sock, IPPROTO_IP, IP_ADD_MEMBERSHIP, (void*)&amp;joinAddr, sizeof(joinAddr));\n</code></pre>\n<pre><code>struct ip_mreq\n{\n    struct in_addr imr_multiaddr;\n    struct in_addr imr_interface;\n}\n</code></pre>\n<h1 id=\"%E5%B9%BF%E6%92%AD\" tabindex=\"-1\">广播</h1>\n<ul>\n<li>\n<p>直接广播：直接广播的IP地址除了网络地址外其余的所有主机地址全部设置为1.例如：向网络地址为192.168.8网络地址中所有主机发送数据时，可以向IP地址为192.168.8.255传输数据。</p>\n</li>\n<li>\n<p>本地广播：本地广播中限定IP地址为255.255.255.255.例如：在网络地址为192.168.8的主机向ip地址为255.255.255.255发送数据，数据讲传送到192.168.8网络地址下的所有主机中。</p>\n</li>\n</ul>\n<h2 id=\"%E6%9B%B4%E6%94%B9%E5%A5%97%E6%8E%A5%E5%AD%97%E9%BB%98%E8%AE%A4%E5%80%BC%E4%BB%A5%E5%85%81%E8%AE%B8%E5%B9%BF%E6%92%AD\" tabindex=\"-1\">更改套接字默认值以允许广播</h2>\n<blockquote>\n<p>默认生成的套接字会阻止广播，我们需要按照以下方法修改默认值。</p>\n</blockquote>\n<pre><code>#include&lt;sys/socket.h&gt;\n#include&lt;arpa/inet.h&gt;\n\nint sock = socket(PF_INET, SOCK_DGRAM, 0);\n\nint broadcast = 1;\n\nsetsockopt(sock, SOL_SOCKET, SO_BROADCAST, (void*)&amp;broadcast, sizeof(broadcast));\n</code></pre>\n"}