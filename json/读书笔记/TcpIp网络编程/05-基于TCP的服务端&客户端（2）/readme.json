{"data":{},"__content":"<h1 id=\"tcp%E5%8E%9F%E7%90%86\" tabindex=\"-1\">TCP原理</h1>\n<h2 id=\"tcp%E5%A5%97%E6%8E%A5%E5%AD%97%E4%B8%AD%E7%9A%84i%2Fo%E7%BC%93%E5%86%B2\" tabindex=\"-1\">TCP套接字中的I/O缓冲</h2>\n<ul>\n<li>I/O缓冲在每个TCP套接字中单独存在</li>\n<li>I/O缓冲在创建套接字时自动生成</li>\n<li>即使关闭套接字仍然会传输遗留在输出缓冲区中的数据</li>\n<li>关闭套接字会丢失输入缓冲区中的数据</li>\n</ul>\n<h2 id=\"tcp%E5%86%85%E9%83%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%861%EF%BC%9A%E4%B8%8E%E5%AF%B9%E6%96%B9%E5%A5%97%E6%8E%A5%E5%AD%97%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5\" tabindex=\"-1\">TCP内部工作原理1：与对方套接字建立连接</h2>\n<p><img src=\"./.image/%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B.png\" alt=\"TCP三次握手协议建立连接过程\"></p>\n<h2 id=\"tcp%E5%86%85%E9%83%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%862%EF%BC%9A%E4%B8%8E%E5%AF%B9%E6%96%B9%E4%B8%BB%E6%9C%BA%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2\" tabindex=\"-1\">TCP内部工作原理2：与对方主机的数据交换</h2>\n<p><img src=\"./.image/TCP%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2%E8%BF%87%E7%A8%8B.png\" alt=\"TCP交换数据过程\"></p>\n<blockquote>\n<p>数据交换过程中：<code>ACK号 = SEQ号 + 传输的数据的字节数 + 1</code></p>\n</blockquote>\n<p><img src=\"./.image/TCP%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2%E5%8F%91%E7%94%9F%E9%94%99%E8%AF%AF.png\" alt=\"TCP数据交换过程发生错误\"></p>\n<h2 id=\"tcp%E5%86%85%E9%83%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%863%EF%BC%9A%E6%96%AD%E5%BC%80%E4%B8%8E%E5%AF%B9%E6%96%B9%E5%A5%97%E6%8E%A5%E5%AD%97%E7%9A%84%E8%BF%9E%E6%8E%A5\" tabindex=\"-1\">TCP内部工作原理3：断开与对方套接字的连接</h2>\n<p><img src=\"./.image/%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B.png\" alt=\"四次挥手\"></p>\n<h1 id=\"%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3tcp%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E5%92%8C%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%E8%BF%87%E7%A8%8B\" tabindex=\"-1\">深入理解TCP三次握手和四次挥手过程</h1>\n<h2 id=\"%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%EF%BC%9A\" tabindex=\"-1\">三次握手：</h2>\n<p>A:“喂，你听得到吗？”A-&gt;SYN_SEND</p>\n<p>B:“我听得到呀，你听得到我吗？”应答与请求同时发出 B-&gt;SYN_RCVD | A-&gt;ESTABLISHED</p>\n<p>A:“我能听到你，今天balabala……”B-&gt;ESTABLISHED</p>\n<h2 id=\"%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%EF%BC%9A\" tabindex=\"-1\">四次挥手：</h2>\n<p>A:“喂，我不说了。”A-&gt;FIN_WAIT1</p>\n<p>B:“我知道了。等下，上一句还没说完。Balabala…..”B-&gt;CLOSE_WAIT | A-&gt;FIN_WAIT2</p>\n<p>B:”好了，说完了，我也不说了。”B-&gt;LAST_ACK</p>\n<p>A:”我知道了。”A-&gt;TIME_WAIT | B-&gt;CLOSED</p>\n<p>A等待2MSL,保证B收到了消息,否则重说一次”我知道了”,A-&gt;CLOSED</p>\n"}