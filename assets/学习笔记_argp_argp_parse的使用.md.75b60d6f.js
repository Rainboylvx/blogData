import{_ as s,j as n,g as a,I as l}from"./chunks/framework.6fa7194a.js";const u=JSON.parse('{"title":"argp_parse\u7684\u4F7F\u7528","description":"","frontmatter":{"_id":"S1f30EtnQ","title":"argp_parse\u7684\u4F7F\u7528","date":"2018-11-02 11:04","update":"2018-11-02 11:04","series":"\u65E0","categories":["\u5B66\u4E60\u7B14\u8BB0"],"tags":["c\u8BED\u8A00","\u53C2\u6570\u89E3\u6790"]},"headers":[{"level":2,"title":"\u76F8\u5173","slug":"\u76F8\u5173"},{"level":2,"title":"\u51FD\u6570\u539F\u578B","slug":"\u51FD\u6570\u539F\u578B"},{"level":2,"title":"\u5168\u5C40\u53D8\u91CF","slug":"\u5168\u5C40\u53D8\u91CF"},{"level":2,"title":"\u8BBE\u5B9Aargp\u53C2\u6570\u89E3\u6790\u5668","slug":"\u8BBE\u5B9Aargp\u53C2\u6570\u89E3\u6790\u5668"},{"level":3,"title":"\u8BBE\u5B9AArgp Parser\u7684\u9009\u9879","slug":"\u8BBE\u5B9Aargp-parser\u7684\u9009\u9879"},{"level":2,"title":"\u5B9E\u4F8B\u5173\u7CFB\u56FE","slug":"\u5B9E\u4F8B\u5173\u7CFB\u56FE"},{"level":3,"title":"flags","slug":"flags"},{"level":2,"title":"\u4F8B\u5B50\u4E00:","slug":"\u4F8B\u5B50\u4E00"},{"level":2,"title":"argp_use \u51FD\u6570\u7684\u4F7F\u7528","slug":"argp-use-\u51FD\u6570\u7684\u4F7F\u7528"},{"level":2,"title":"state->input \u7684\u6307\u9488","slug":"state-input-\u7684\u6307\u9488"},{"level":2,"title":"\u81EA\u52A8\u8F93\u51FAusage","slug":"\u81EA\u52A8\u8F93\u51FAusage"}],"relativePath":"\u5B66\u4E60\u7B14\u8BB0/argp/argp_parse\u7684\u4F7F\u7528.md"}'),p={name:"\u5B66\u4E60\u7B14\u8BB0/argp/argp_parse\u7684\u4F7F\u7528.md"},o=l(`<h2 id="\u76F8\u5173" tabindex="-1">\u76F8\u5173 <a class="header-anchor" href="#\u76F8\u5173" aria-hidden="true">#</a></h2><p>\u4F7F\u7528c\u8BED\u8A00\u6765\u89E3\u6790 <code>argv</code>\u6709\u8FD9\u51E0\u79CD\u5E38\u7528\u65B9\u5F0F<code>getopt</code>,<code>argp</code>,<a href="https://www.gnu.org/software/libc/manual/html_node/Argp.html#Argp" target="_blank" rel="noreferrer">\u76F8\u5173\u8BF4\u660E</a>,\u8FD9\u91CC\u5B66\u4E60\u4E00\u4E0B<code>argp</code>\u7684\u4F7F\u7528.</p><h2 id="\u51FD\u6570\u539F\u578B" tabindex="-1">\u51FD\u6570\u539F\u578B <a class="header-anchor" href="#\u51FD\u6570\u539F\u578B" aria-hidden="true">#</a></h2><div class="language-c line-numbers-mode"><button class="copy"></button><span class="lang">c</span><pre><code><span class="line"><span style="color:#A6ACCD;">Function: </span><span style="color:#FFCB6B;">error_t</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">argp_parse</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">struct</span><span style="color:#A6ACCD;"> argp </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">argp</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> argc</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">char</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">**</span><span style="color:#A6ACCD;">argv</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">unsigned</span><span style="color:#A6ACCD;"> flags</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">arg_index</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">input</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>\u53C2\u6570</strong></p><ul><li><code>const struct argp *argp</code></li><li><code>int argc</code> \u53C2\u6570\u7684\u6570\u91CF</li><li><code>char **argv</code> \u53C2\u6570\u5217\u8868</li><li><code>unsigned flags</code> \u5F71\u54CD\u89E3\u6790parser\u7684\u8868\u73B0</li><li><code>int *arg_index</code> \u975E\u7A7A,\u7B2C\u4E00\u4E2A\u4E0D\u88AB\u89E3\u6790\u7684\u53C2\u6570\u4E0B\u6807\u4F1A\u88ABreturn</li><li><code>void *input</code> \u4E00\u4E2A\u6307\u9488,\u6700\u540E\u4F20\u7ED9parse_function\u7684\u91CCarg_state-&gt;input</li></ul><p><code>ARGP_NO_EXIT</code> or <code>ARGP_NO_HELP</code> flags \u88AB\u5305\u542B\u4E86,\u4E0D\u4F1A\u5728\u7A0B\u5E8F\u9000\u51FA\u7684\u65F6\u5019\u8F93\u51FA\u4E00\u4E2A\u53C2\u6570\u4FE1\u606F</p><p>\u5982\u679C\u6210\u529F,<code>return 0</code></p><h2 id="\u5168\u5C40\u53D8\u91CF" tabindex="-1">\u5168\u5C40\u53D8\u91CF <a class="header-anchor" href="#\u5168\u5C40\u53D8\u91CF" aria-hidden="true">#</a></h2><p>\u5168\u5C40\u53D8\u91CF,\u5728<code>--version, --help</code>\u7684\u65F6\u5019\u4F7F\u7528</p><ul><li>\u53D8\u91CF: <code>const char * argp_program_version</code>,<code>--version</code>\u7684\u65F6\u5019\u4F7F\u7528</li><li>\u53D8\u91CF: <code>const char * argp_program_bug_address</code> <code>--help</code>\u7684\u65F6\u5019\u4F7F\u7528</li><li>\u53D8\u91CF: <code>argp_program_version_hook</code>,\u5982\u679C\u60F3\u81EA\u5DF1\u5B9A\u4E49\u4E00\u4E2A<code>--version</code>\u8F93\u51FA\u51FD\u6570,\u4F7F\u7528\u5B83</li><li>\u53D8\u91CF:<code>error_t argp_err_exit_status</code>,\u89E3\u6790\u9519\u8BEF\u7684\u8FD4\u56DE\u503C.</li></ul><h2 id="\u8BBE\u5B9Aargp\u53C2\u6570\u89E3\u6790\u5668" tabindex="-1">\u8BBE\u5B9Aargp\u53C2\u6570\u89E3\u6790\u5668 <a class="header-anchor" href="#\u8BBE\u5B9Aargp\u53C2\u6570\u89E3\u6790\u5668" aria-hidden="true">#</a></h2><p>\u9700\u8981\u5B9A\u4E49<strong>struct argp</strong>,\u5B83\u5305\u542B\u4E0B\u9762\u7684\u53C2\u6570</p><ul><li><code>const struct argp_option *options</code>,\u6307\u5411<code>argp_option</code>\u7ED3\u6784\u4F53\u6570\u7EC4,\u8868\u793A\u54EA\u4E9B\u53C2\u6570\u88AB\u89E3\u6790</li><li><code>argp_parser_t parser</code>,\u6307\u5411\u4E00\u4E2A\u89E3\u6790\u51FD\u6570</li><li><code>const char *args_doc</code> \u975E\u7A7A,\u5728\u4E00\u4E2A\u672B\u5B9A\u4E49\u7684\u53C2\u6570\u51FA\u73B0\u540E\u88AB\u8F93\u51FA</li><li><code>const char *doc</code> \u4F1A\u5728<code>--help</code>\u65F6\u8F93\u51FA</li><li><code>const struct argp_child *children</code> \u53EF\u4EE5\u4E0D\u7528</li><li><code>char *(*help_filter)(int key, const char *text, void *input)</code>,\u8FC7\u6EE4help\u4FE1\u606F,\u53EF\u4EE5\u4E0D\u7528</li><li><code>const char *argp_domain</code> \u53EF\u4EE5\u4E0D\u7528</li></ul><h3 id="\u8BBE\u5B9Aargp-parser\u7684\u9009\u9879" tabindex="-1">\u8BBE\u5B9AArgp Parser\u7684\u9009\u9879 <a class="header-anchor" href="#\u8BBE\u5B9Aargp-parser\u7684\u9009\u9879" aria-hidden="true">#</a></h3><p>\u4E00\u4E2A\u7ED3\u6784\u4F53,\u63D0\u4F9B\u7ED9<code>struct argp</code>\u7684\u7B2C\u4E00\u4E2A\u53C2\u6570\u4F7F\u7528,</p><div class="language-c line-numbers-mode"><button class="copy"></button><span class="lang">c</span><pre><code><span class="line"></span>
<span class="line"><span style="color:#C792EA;">struct</span><span style="color:#A6ACCD;"> argp_option </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">char</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;">  </span><span style="color:#676E95;font-style:italic;">//\u957F\u540D,\u662F0,\u8868\u660E\u53EA\u6709\u77ED\u540D</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">int</span><span style="color:#F07178;"> key</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;">          </span><span style="color:#676E95;font-style:italic;">//\u77ED\u540D,\u540C\u6837\u662F\u4E00\u4E2A\u5173\u952Ekey\u503C,\u4E00\u5B9A\u662F\u4E00\u4E2Aascii\u503C</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">char</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;">arg</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;">  </span><span style="color:#676E95;font-style:italic;">//\u5982\u679C\u4E0D\u4E3A0,\u8868\u660E\u8FD9\u4E2A\u9009\u9879\u5FC5\u987B\u63D0\u4F9B,\u51FA\u9519\u65F6 \u8F93\u51FA\u8FD9\u4E2A\u540D\u5B57</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">int</span><span style="color:#F07178;"> flags</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;">      </span><span style="color:#676E95;font-style:italic;">//\u6807\u8BB0 \u5177\u4F53\u770B Argp Option Flags.</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">char</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">*</span><span style="color:#F07178;">doc</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// \u6587\u6863,--help \u91CC\u8F93\u51FA</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">int</span><span style="color:#F07178;"> group</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;">      </span><span style="color:#676E95;font-style:italic;">// \u7EC4 ? \u4E0D\u77E5\u9053\u600E\u4E48\u7528</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>\u4F8B\u5B50:</p><div class="language-c line-numbers-mode"><button class="copy"></button><span class="lang">c</span><pre><code><span class="line"><span style="color:#C792EA;">struct</span><span style="color:#A6ACCD;"> argp_option _example</span><span style="color:#C792EA;">[]</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//\u957F\u540D,\u77ED\u540D,     &quot;arg\u540D&quot;,flag,                 doc,  group</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">in</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">I</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">input_file</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">  </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">the input file name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">     </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">out</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">O</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">output_file</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">the output file name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">    </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">{</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">},</span><span style="color:#F07178;">        </span><span style="color:#676E95;font-style:italic;">//\u7ED3\u675F</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="argp-parser-t-parser" tabindex="-1">argp_parser_t parser <a class="header-anchor" href="#argp-parser-t-parser" aria-hidden="true">#</a></h4><p>\u6307\u5411\u4E00\u4E2A\u89E3\u6790\u51FD\u6570,\u5BF9\u4E0A\u9762\u7684<code>argp_option</code>\u7684\u63D0\u4F9B\u7684\u6BCF\u4E00\u6761\u8FDB\u884C\u89E3\u6790,\u5982\u679C\u4E3A0,\u4F1A\u6307\u5411\u7684\u4E00\u4E2A\u8FD4\u56DE<code>ARGP_ERR_UNKNOWN</code>\u7684\u51FD\u6570</p><p>\u51FD\u6570\u7684\u5199\u6CD5\u5982\u4E0B,<a href="https://www.gnu.org/software/libc/manual/html_node/Argp-Parser-Functions.html#Argp-Parser-Functions" target="_blank" rel="noreferrer">\u53C2\u8003</a></p><div class="language-c line-numbers-mode"><button class="copy"></button><span class="lang">c</span><pre><code><span class="line"><span style="color:#FFCB6B;">error_t</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">parser</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> key</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">char</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">struct</span><span style="color:#A6ACCD;"> argp_state </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>key,\u5C31\u662F\u4E0A\u9762<code>argp_option</code>\u7684key\u503C</li><li>arg,\u5E94\u8BE5\u662Fkey\u540E\u8DDF\u7684\u503C,\u5982<code>-I 1024</code> 1024 \u5C31\u662F</li><li>state,\u6307\u5411<code>argp_state</code>\u7ED3\u6784,\u5305\u542B\u4E86\u4E00\u4E9B\u6709\u7528\u7684\u4FE1\u606F</li></ul><h2 id="\u5B9E\u4F8B\u5173\u7CFB\u56FE" tabindex="-1">\u5B9E\u4F8B\u5173\u7CFB\u56FE <a class="header-anchor" href="#\u5B9E\u4F8B\u5173\u7CFB\u56FE" aria-hidden="true">#</a></h2><div class="language- line-numbers-mode"><button class="copy"></button><span class="lang"></span><pre><code><span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">+===========================================================+</span></span>
<span class="line"><span style="color:#A6ACCD;">|               struct argp                                 |</span></span>
<span class="line"><span style="color:#A6ACCD;">+===========================================================+</span></span>
<span class="line"><span style="color:#A6ACCD;">|const struct argp_option *options                          +------------+</span></span>
<span class="line"><span style="color:#A6ACCD;">+-----------------------------------------------------------+            |</span></span>
<span class="line"><span style="color:#A6ACCD;">|argp_parser_t parser                                       |------------+---+</span></span>
<span class="line"><span style="color:#A6ACCD;">+-----------------------------------------------------------+            |   |</span></span>
<span class="line"><span style="color:#A6ACCD;">|const char *args_doc                                       |            |   |</span></span>
<span class="line"><span style="color:#A6ACCD;">+-----------------------------------------------------------+            |   |</span></span>
<span class="line"><span style="color:#A6ACCD;">|const char *doc                                            |            |   |</span></span>
<span class="line"><span style="color:#A6ACCD;">+-----------------------------------------------------------+            |   |</span></span>
<span class="line"><span style="color:#A6ACCD;">|const struct argp_child *children                          |            |   |</span></span>
<span class="line"><span style="color:#A6ACCD;">+-----------------------------------------------------------+            |   |</span></span>
<span class="line"><span style="color:#A6ACCD;">|char *(*help_filter)(int key, const char *text, void *input)            |   |</span></span>
<span class="line"><span style="color:#A6ACCD;">+-----------------------------------------------------------+            |   |</span></span>
<span class="line"><span style="color:#A6ACCD;">|const char *argp_domain                                    |            |   |</span></span>
<span class="line"><span style="color:#A6ACCD;">+-----------------------------------------------------------+            |   |</span></span>
<span class="line"><span style="color:#A6ACCD;">                                                                         |   |</span></span>
<span class="line"><span style="color:#A6ACCD;">  +====================+                                                 |   |</span></span>
<span class="line"><span style="color:#A6ACCD;">  | struct argp_option | &lt;-----------------------------------------------+   |</span></span>
<span class="line"><span style="color:#A6ACCD;">  +====================+                                                     |</span></span>
<span class="line"><span style="color:#A6ACCD;">  | const char *name   |                                                     |</span></span>
<span class="line"><span style="color:#A6ACCD;">  +--------------------+                                                     |</span></span>
<span class="line"><span style="color:#A6ACCD;">  | int key;           |                                                     |</span></span>
<span class="line"><span style="color:#A6ACCD;">  +--------------------+                                                     |</span></span>
<span class="line"><span style="color:#A6ACCD;">  | const char *arg    |                                                     |</span></span>
<span class="line"><span style="color:#A6ACCD;">  +--------------------+                                                     |</span></span>
<span class="line"><span style="color:#A6ACCD;">  | int flags          |                                                     |</span></span>
<span class="line"><span style="color:#A6ACCD;">  +--------------------+                                                     |</span></span>
<span class="line"><span style="color:#A6ACCD;">  | const char *doc    |                                                     |</span></span>
<span class="line"><span style="color:#A6ACCD;">  +--------------------+                                                     |</span></span>
<span class="line"><span style="color:#A6ACCD;">  | int group          |                                                     |</span></span>
<span class="line"><span style="color:#A6ACCD;">  +--------------------+                                                     |</span></span>
<span class="line"><span style="color:#A6ACCD;">                                                                             |</span></span>
<span class="line"><span style="color:#A6ACCD;"> +-------------------------------------------------------------+             |</span></span>
<span class="line"><span style="color:#A6ACCD;"> |error_t parser (int key, char *arg, struct argp_state *state)|&lt;------------+</span></span>
<span class="line"><span style="color:#A6ACCD;"> +-------------------------------------------------------------+             </span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="flags" tabindex="-1">flags <a class="header-anchor" href="#flags" aria-hidden="true">#</a></h3><p>ARGP_NO_EXIT or ARGP_NO_HELP</p><h2 id="\u4F8B\u5B50\u4E00" tabindex="-1">\u4F8B\u5B50\u4E00: <a class="header-anchor" href="#\u4F8B\u5B50\u4E00" aria-hidden="true">#</a></h2><div class="language-c line-numbers-mode"><button class="copy"></button><span class="lang">c</span><pre><code><span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">#include</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">argp.h</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">#include</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">stdlib.h</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">#include</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">stdio.h</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">char</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">argp_program_version</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">rainboy&#39;parser ver1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">char</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> argp_program_bug_address </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">rainboylvx@qq.com</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">char</span><span style="color:#A6ACCD;"> args_doc</span><span style="color:#C792EA;">[]</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">args_doc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">char</span><span style="color:#A6ACCD;"> doc</span><span style="color:#C792EA;">[]</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">all doc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">struct</span><span style="color:#A6ACCD;"> argp_option _example</span><span style="color:#C792EA;">[]</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//\u957F\u540D,\u77ED\u540D,     &quot;arg\u540D&quot;,flag,                 doc,     group</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">in</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">i</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">input_file</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">  </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">the input file name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">     </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">out</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">o</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">output_file</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">the output file name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">    </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">{</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">},</span><span style="color:#F07178;">        </span><span style="color:#676E95;font-style:italic;">//\u7ED3\u675F</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">error_t</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">arg_parser</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> key</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">char</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">arg</span><span style="color:#89DDFF;">,</span><span style="color:#C792EA;">struct</span><span style="color:#A6ACCD;"> argp_state </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">switch</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">key</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">case</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">i</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">this opt is in,-i,arg is :%s</span><span style="color:#A6ACCD;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">arg</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">break</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">case</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">o</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">this opt is in,-o,arg is :%s</span><span style="color:#A6ACCD;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">arg</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">break</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#82AAFF;">printf</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">unkonw opt</span><span style="color:#A6ACCD;">\\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#676E95;font-style:italic;">/*printf(&quot;key:\\t%c\\n&quot;,key);*/</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#676E95;font-style:italic;">/*printf(&quot;arg:\\t%s\\n&quot;,arg);*/</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> ARGP_ERR_UNKNOWN</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">struct</span><span style="color:#A6ACCD;"> argp _argp_ </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    _example</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    arg_parser</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    args_doc</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    doc</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> argc </span><span style="color:#89DDFF;">,</span><span style="color:#C792EA;">char</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">**</span><span style="color:#A6ACCD;">argv</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">    </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">int</span><span style="color:#F07178;"> res </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">argp_parse</span><span style="color:#89DDFF;">(&amp;</span><span style="color:#F07178;">_argp_</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">argc</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">argv</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">exit</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h2 id="argp-use-\u51FD\u6570\u7684\u4F7F\u7528" tabindex="-1">argp_use \u51FD\u6570\u7684\u4F7F\u7528 <a class="header-anchor" href="#argp-use-\u51FD\u6570\u7684\u4F7F\u7528" aria-hidden="true">#</a></h2><blockquote><p>Outputs the standard usage message for the argp parser referred to by state to state-&gt;err_stream and terminates the program with exit (argp_err_exit_status). See Argp Global Variables.</p></blockquote><p>\u8F93\u51FAusage \u4FE1\u606F,\u5E76\u4E14\u7ED3\u675F\u7A0B\u5E8F</p><h2 id="state-input-\u7684\u6307\u9488" tabindex="-1">state-&gt;input \u7684\u6307\u9488 <a class="header-anchor" href="#state-input-\u7684\u6307\u9488" aria-hidden="true">#</a></h2><h2 id="\u81EA\u52A8\u8F93\u51FAusage" tabindex="-1">\u81EA\u52A8\u8F93\u51FAusage <a class="header-anchor" href="#\u81EA\u52A8\u8F93\u51FAusage" aria-hidden="true">#</a></h2><p>\u6CA1\u6709\u53C2\u6570\u7684\u65F6\u5019</p>`,36),e=[o];function r(c,t,y,i,D,F){return a(),n("div",null,e)}var A=s(p,[["render",r]]);export{u as __pageData,A as default};
